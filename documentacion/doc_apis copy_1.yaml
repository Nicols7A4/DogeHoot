openapi: 3.0.4
info:
  title: DogeHoot API 1.0
  description: |-
    API de DogeHoot - Plataforma educativa de cuestionarios interactivos. Puedes encontrar la aplicación en [DogeHoot](https://dmailproject.pythonanywhere.com/).
    
    Esta API permite gestionar usuarios, cuestionarios, preguntas, partidas y más funcionalidades de la plataforma educativa.

    Links útiles:
    - [Repositorio del proyecto](https://github.com/Nicols7A4/DogeHoot)
  termsOfService: https://swagger.io/terms/
  contact:
    email: 73073168@usat.pe
  license:
    name: Apache 2.0
    url: https://www.apache.org/licenses/LICENSE-2.0.html
  version: 1.0.12
externalDocs:
  description: Más información sobre Swagger
  url: https://swagger.io
servers:
  - url: https://dmailproject.pythonanywhere.com/
tags:
  - name: usuarios
    description: Operaciones sobre usuarios de la plataforma DogeHoot
    externalDocs:
      description: Más información
      url: https://swagger.io
  - name: cuestionarios
    description: Gestión de cuestionarios educativos
    externalDocs:
      description: Más información
      url: https://swagger.io
  - name: preguntas
    description: Gestión de preguntas de los cuestionarios
  - name: opciones
    description: Gestión de opciones de respuesta de las preguntas
  - name: partidas
    description: Sesiones de juego y gestión de partidas
  - name: skin
    description: Operaciones sobre skins
paths:
  /api_obtener_usuarios:
    get:
      tags:
        - usuarios
      summary: Obtener todos los usuarios
      description: Retorna la lista completa de usuarios registrados en la plataforma
      operationId: obtenerUsuarios
      responses:
        '200':
          description: Operación exitosa
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok:
                    type: boolean
                    example: true
                  usuarios:
                    type: array
                    items:
                      $ref: '#/components/schemas/Usuario'
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        default:
          description: Error inesperado
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - jwt_auth: []
  /api_obtener_usuario_por_id/{id_usuario}:
    get:
      tags:
        - usuarios
      summary: Obtener usuario por ID
      description: Retorna la información de un usuario específico según su ID
      operationId: obtenerUsuarioPorId
      parameters:
        - name: id_usuario
          in: path
          description: ID del usuario a obtener
          required: true
          schema:
            type: integer
            format: int32
      responses:
        '200':
          description: Operación exitosa
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok:
                    type: boolean
                    example: true
                  usuario:
                    $ref: '#/components/schemas/Usuario'
        '404':
          description: Usuario no encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        default:
          description: Error inesperado
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - jwt_auth: []
  /api_registrar_usuario:
    post:
      tags:
        - usuarios
      summary: Registrar un nuevo usuario
      description: Crea un nuevo usuario en la plataforma con los datos proporcionados
      operationId: registrarUsuario
      requestBody:
        description: Datos del usuario a registrar
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UsuarioRegistro'
      responses:
        '201':
          description: Usuario creado exitosamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok:
                    type: boolean
                    example: true
                  mensaje:
                    type: string
                    example: Usuario registrado exitosamente
        '400':
          description: Datos de entrada inválidos
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Faltan datos requeridos
        '409':
          description: Conflicto - Usuario ya existe
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: El correo ya está registrado
        default:
          description: Error inesperado
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - jwt_auth: []
  /api_actualizar_usuario:
    put:
      tags:
        - usuarios
      summary: Actualizar información de usuario
      description: Actualiza los datos de un usuario existente
      operationId: actualizarUsuario
      requestBody:
        description: Datos del usuario a actualizar
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UsuarioActualizacion'
      responses:
        '200':
          description: Usuario actualizado exitosamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok:
                    type: boolean
                    example: true
                  usuario:
                    $ref: '#/components/schemas/Usuario'
        '400':
          description: Datos inválidos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Usuario no encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '409':
          description: Conflicto - Correo o nombre de usuario ya existe
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        default:
          description: Error inesperado
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - jwt_auth: []
  /api_eliminar_usuario:
    post:
      tags:
        - usuarios
      summary: Eliminar (desactivar) usuario
      description: Desactiva un usuario de la plataforma (no se elimina físicamente). Envía el id_usuario en el body JSON.
      operationId: eliminarUsuario
      requestBody:
        description: ID del usuario a eliminar
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - id_usuario
              properties:
                id_usuario:
                  type: integer
                  format: int32
                  example: 5
      responses:
        '200':
          description: Usuario desactivado exitosamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok:
                    type: boolean
                    example: true
                  id_usuario:
                    type: integer
                    example: 5
                  vigente:
                    type: boolean
                    example: false
        '404':
          description: Usuario no encontrado
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Usuario no encontrado
        '500':
          description: Error al desactivar usuario
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: No se pudo desactivar el usuario
        default:
          description: Error inesperado
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - jwt_auth: []
    delete:
      tags:
        - usuarios
      summary: Eliminar (desactivar) usuario (método DELETE)
      description: Desactiva un usuario de la plataforma (no se elimina físicamente). Nota - OpenAPI no permite requestBody en DELETE, pero tu API lo acepta.
      operationId: eliminarUsuarioDelete
      parameters:
        - name: id_usuario
          in: query
          description: ID del usuario a eliminar (o enviar en body según implementación)
          required: false
          schema:
            type: integer
            format: int32
            example: 5
      responses:
        '200':
          description: Usuario desactivado exitosamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  ok:
                    type: boolean
                    example: true
                  id_usuario:
                    type: integer
                    example: 5
                  vigente:
                    type: boolean
                    example: false
        '404':
          description: Usuario no encontrado
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: Usuario no encontrado
        '500':
          description: Error al desactivar usuario
          content:
            application/json:
              schema:
                type: object
                properties:
                  error:
                    type: string
                    example: No se pudo desactivar el usuario
        default:
          description: Error inesperado
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - jwt_auth: []
  /api_registrarskin:
    post:
      tags:
        - skin
      summary: Insertar Skin
      description: Registra una nueva skin en la base de datos.
      operationId: registrarSkin
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SkinCreate'
      responses:
        '200':
          description: Skin registrada correctamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
        '400':
          description: Datos de entrada inválidos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        default:
          description: Error inesperado
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - jwt_auth: []
  /api_obtenerskins:
    get:
      tags:
        - skin
      summary: Obtener Skins
      description: Retorna la lista de skins disponibles.
      operationId: obtenerSkins
      responses:
        '200':
          description: Skins obtenidas correctamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 200
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Skin'
                  message:
                    type: string
                    example: Skins obtenidas exitosamente
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        default:
          description: Error inesperado
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - jwt_auth: []
  /api_obtenerskinporid/{id}:
    get:
      tags:
        - skin
      summary: Obtener Skin por ID
      description: Retorna una skin por su identificador.
      operationId: obtenerSkinPorId
      parameters:
        - name: id
          in: path
          description: ID de la skin a obtener
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Skin obtenida correctamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Skin'
        '400':
          description: ID inválido
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Skin no encontrada
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        default:
          description: Error inesperado
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - jwt_auth: []
  /api_actualizarskin/{id}:
    put:
      tags:
        - skin
      summary: Actualizar Skin
      description: Actualiza una skin existente.
      operationId: actualizarSkin
      parameters:
        - name: id
          in: path
          description: ID de la skin a actualizar
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SkinUpdate'
      responses:
        '200':
          description: Skin actualizada correctamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
        '400':
          description: Datos inválidos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Skin no encontrada
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        default:
          description: Error inesperado
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - jwt_auth: []
  /api_eliminarskin/{id}:
    delete:
      tags:
        - skin
      summary: Eliminar Skin
      description: Elimina una skin por su id.
      operationId: eliminarSkin
      parameters:
        - name: id
          in: path
          description: ID de la skin a eliminar
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Skin eliminada correctamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
        '400':
          description: ID inválido
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Skin no encontrada
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        default:
          description: Error inesperado
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - jwt_auth: []
  /api_obtener_cuestionarios:
    get:
      tags:
        - cuestionarios
      summary: Obtener todos los cuestionarios
      description: Retorna la lista completa de cuestionarios registrados
      operationId: obtenerCuestionarios
      responses:
        '200':
          description: Operación exitosa
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Cuestionario'
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        default:
          description: Error inesperado
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - jwt_auth: []
  /api_obtener_cuestionario_por_id/{id_cuestionario}:
    get:
      tags:
        - cuestionarios
      summary: Obtener cuestionario por ID
      description: Retorna la información de un cuestionario específico
      operationId: obtenerCuestionarioPorId
      parameters:
        - name: id_cuestionario
          in: path
          description: ID del cuestionario a obtener
          required: true
          schema:
            type: integer
            format: int32
      responses:
        '200':
          description: Operación exitosa
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/Cuestionario'
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        default:
          description: Error inesperado
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - jwt_auth: []
  /api_registar_cuestionario:
    post:
      tags:
        - cuestionarios
      summary: Registrar nuevo cuestionario
      description: Crea un nuevo cuestionario en la plataforma
      operationId: registrarCuestionario
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CuestionarioCreate'
      responses:
        '201':
          description: Cuestionario creado exitosamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  mensaje:
                    type: string
                    example: Cuestionario creado con éxito
        '400':
          description: Faltan datos requeridos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        default:
          description: Error inesperado
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - jwt_auth: []
  /api_actualizar_cuestionario:
    put:
      tags:
        - cuestionarios
      summary: Actualizar cuestionario
      description: Actualiza la información de un cuestionario existente
      operationId: actualizarCuestionario
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CuestionarioUpdate'
      responses:
        '201':
          description: Cuestionario actualizado exitosamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  mensaje:
                    type: string
                    example: Cuestionario actualizado con éxito
        '400':
          description: Faltan datos requeridos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        default:
          description: Error inesperado
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - jwt_auth: []
  /api_elimiinar_cuestionario:
    delete:
      tags:
        - cuestionarios
      summary: Eliminar cuestionario
      description: Desactiva un cuestionario (eliminación lógica)
      operationId: eliminarCuestionario
      parameters:
        - name: id_cuestionario
          in: query
          description: ID del cuestionario a eliminar
          required: true
          schema:
            type: integer
            format: int32
      responses:
        '200':
          description: Cuestionario desactivado exitosamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  mensaje:
                    type: string
                    example: Cuestionario desactivado correctamente
        '404':
          description: Cuestionario no encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        default:
          description: Error inesperado
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - jwt_auth: []
  /api_obtener_preguntas:
    get:
      tags:
        - preguntas
      summary: Obtener todas las preguntas
      description: Retorna la lista completa de preguntas
      operationId: obtenerPreguntas
      responses:
        '200':
          description: Operación exitosa
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Pregunta'
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        default:
          description: Error inesperado
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - jwt_auth: []
  /api_obtener_pregunta_por_id/{id_pregunta}:
    get:
      tags:
        - preguntas
      summary: Obtener pregunta por ID
      description: Retorna la información de una pregunta específica
      operationId: obtenerPreguntaPorId
      parameters:
        - name: id_pregunta
          in: path
          description: ID de la pregunta a obtener
          required: true
          schema:
            type: integer
            format: int32
      responses:
        '200':
          description: Operación exitosa
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/Pregunta'
        '404':
          description: Pregunta no encontrada
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        default:
          description: Error inesperado
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - jwt_auth: []
  /api_registrar_pregunta:
    post:
      tags:
        - preguntas
      summary: Registrar nueva pregunta
      description: Crea una nueva pregunta en un cuestionario
      operationId: registrarPregunta
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PreguntaCreate'
      responses:
        '201':
          description: Pregunta creada exitosamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  mensaje:
                    type: string
                    example: Pregunta creada con éxito
        '400':
          description: Faltan datos requeridos o datos inválidos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '404':
          description: Validación fallida (tiempo o puntaje inválido)
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        default:
          description: Error inesperado
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - jwt_auth: []
  /api_actualizar_pregunta:
    put:
      tags:
        - preguntas
      summary: Actualizar pregunta
      description: Actualiza la información de una pregunta existente
      operationId: actualizarPregunta
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PreguntaUpdate'
      responses:
        '200':
          description: Pregunta actualizada exitosamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  mensaje:
                    type: string
                    example: Pregunta actualizada
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        default:
          description: Error inesperado
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - jwt_auth: []
  /api_eliminar_pregunta:
    delete:
      tags:
        - preguntas
      summary: Eliminar pregunta
      description: Elimina lógicamente una pregunta
      operationId: eliminarPregunta
      parameters:
        - name: id_pregunta
          in: query
          description: ID de la pregunta a eliminar
          required: true
          schema:
            type: integer
            format: int32
      responses:
        '200':
          description: Pregunta eliminada exitosamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  mensaje:
                    type: string
                    example: Pregunta eliminada logicamente
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        default:
          description: Error inesperado
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - jwt_auth: []
  /api_obtener_opciones:
    get:
      tags:
        - opciones
      summary: Obtener todas las opciones
      description: Retorna la lista completa de opciones de respuesta
      operationId: obtenerOpciones
      responses:
        '200':
          description: Operación exitosa
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Opcion'
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        default:
          description: Error inesperado
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - jwt_auth: []
  /api_obtener_opcion_por_id/{id_opcion}:
    get:
      tags:
        - opciones
      summary: Obtener opción por ID
      description: Retorna la información de una opción específica
      operationId: obtenerOpcionPorId
      parameters:
        - name: id_opcion
          in: path
          description: ID de la opción a obtener
          required: true
          schema:
            type: integer
            format: int32
      responses:
        '200':
          description: Operación exitosa
          content:
            application/json:
              schema:
                type: object
                properties:
                  data:
                    $ref: '#/components/schemas/Opcion'
        '404':
          description: Opción no encontrada
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        default:
          description: Error inesperado
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - jwt_auth: []
  /api_registar_opcion:
    post:
      tags:
        - opciones
      summary: Registrar nueva opción
      description: Crea una nueva opción de respuesta para una pregunta
      operationId: registrarOpcion
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OpcionCreate'
      responses:
        '201':
          description: Opción creada exitosamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  mensaje:
                    type: string
                    example: Opción creada con éxito
        '400':
          description: Faltan datos requeridos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        default:
          description: Error inesperado
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - jwt_auth: []
  /api_actualizar_opcion:
    put:
      tags:
        - opciones
      summary: Actualizar opción
      description: Actualiza la información de una opción existente
      operationId: actualizarOpcion
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OpcionUpdate'
      responses:
        '200':
          description: Opción actualizada exitosamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  mensaje:
                    type: string
                    example: Opción actualizada
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        default:
          description: Error inesperado
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - jwt_auth: []
  /api_eliminar_opcion:
    delete:
      tags:
        - opciones
      summary: Eliminar opción
      description: Elimina lógicamente una opción de respuesta
      operationId: eliminarOpcion
      parameters:
        - name: id_opcion
          in: query
          description: ID de la opción a eliminar
          required: true
          schema:
            type: integer
            format: int32
      responses:
        '200':
          description: Opción eliminada exitosamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  mensaje:
                    type: string
                    example: Opción eliminada
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Error'
        default:
          description: Error inesperado
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - jwt_auth: []
components:
  schemas:
    Usuario:
      type: object
      properties:
        id_usuario:
          type: integer
          format: int32
          example: 1
        nombre_completo:
          type: string
          example: Juan Pérez García
        correo:
          type: string
          format: email
          example: juan.perez@usat.edu.pe
        nombre_usuario:
          type: string
          example: juanperez
        foto:
          type: string
          nullable: true
          example: /static/img/usuario/user123.jpg
        tipo:
          type: string
          enum: [E, P, A]
          description: Tipo de usuario - E (Estudiante), P (Profesor), A (Administrador)
          example: E
        puntos:
          type: integer
          format: int32
          nullable: true
          example: 1500
        monedas:
          type: integer
          format: int32
          nullable: true
          example: 250
        vigente:
          type: boolean
          example: true
        verificado:
          type: boolean
          example: true
        id_skin_activa:
          type: integer
          format: int32
          nullable: true
          example: 3
    UsuarioRegistro:
      type: object
      required:
        - nombre_completo
        - nombre_usuario
        - correo
        - contrasena
      properties:
        nombre_completo:
          type: string
          example: María López Torres
          minLength: 1
        nombre_usuario:
          type: string
          example: marialopez
          minLength: 1
          maxLength: 18
        correo:
          type: string
          format: email
          example: maria.lopez@usat.edu.pe
          description: Debe ser un correo @usat.edu.pe o @usat.pe
        contrasena:
          type: string
          format: password
          example: Password123!
          minLength: 8
          description: Debe contener al menos 8 caracteres, mayúsculas, minúsculas, números y símbolos especiales
        tipo:
          type: string
          enum: [E, P]
          example: E
          description: Tipo de usuario - E (Estudiante), P (Profesor). Se determina automáticamente por el dominio del correo
    UsuarioActualizacion:
      type: object
      required:
        - id_usuario
      properties:
        id_usuario:
          type: integer
          format: int32
          example: 5
        nombre_completo:
          type: string
          example: Juan Pérez García
        nombre_usuario:
          type: string
          example: juanperez
          maxLength: 18
        correo:
          type: string
          format: email
          example: juan.perez@usat.edu.pe
        tipo:
          type: string
          enum: [E, P, A]
          example: E
        puntos:
          type: integer
          format: int32
          minimum: 0
          example: 2000
        monedas:
          type: integer
          format: int32
          minimum: 0
          example: 300
        vigente:
          type: boolean
          example: true
    ApiResponse:
      type: object
      properties:
        code:
          type: integer
          format: int32
          example: 200
        type:
          type: string
          example: success
        message:
          type: string
          example: Operación realizada con éxito
    Skin:
      type: object
      properties:
        id:
          type: integer
          format: int64
          example: 60004
        ruta:
          type: string
          example: img/skins/skin_prueba.png
        tipo:
          type: string
          example: marco
          description: Tipo de skin (marco, avatar, fondo, etc.)
        precio:
          type: number
          example: 150
          description: Precio en monedas de la plataforma
        vigente:
          type: integer
          example: 1
          description: 1 si está activa, 0 si está desactivada
    SkinCreate:
      type: object
      required:
        - ruta
        - tipo
        - precio
      properties:
        ruta:
          type: string
          example: img/skins/skin_prueba.png
          description: Ruta de la imagen de la skin
        tipo:
          type: string
          example: marco
          description: Tipo de skin
        precio:
          type: number
          example: 150
          minimum: 0
          description: Precio en monedas
        vigente:
          type: integer
          example: 1
          default: 1
          description: Estado de la skin (1 activa, 0 inactiva)
    SkinUpdate:
      type: object
      properties:
        ruta:
          type: string
          example: img/skins/skin_actualizada.png
          description: Nueva ruta de la imagen
        tipo:
          type: string
          example: avatar
          description: Nuevo tipo de skin
        precio:
          type: number
          example: 200
          minimum: 0
          description: Nuevo precio
        vigente:
          type: integer
          example: 1
          description: Nuevo estado (1 activa, 0 inactiva)
    Cuestionario:
      type: object
      properties:
        id_cuestionario:
          type: integer
          format: int32
          example: 1
        titulo:
          type: string
          maxLength: 200
          example: Introducción a Python
        descripcion:
          type: string
          example: Cuestionario básico sobre conceptos de Python
        es_publico:
          type: boolean
          example: true
          description: Indica si el cuestionario es público o privado (tinyint)
        fecha_hora_creacion:
          type: string
          format: date-time
          example: "2025-11-18T10:30:00"
          description: Fecha y hora de creación del cuestionario
        id_usuario:
          type: integer
          format: int32
          example: 5
          description: ID del creador del cuestionario
        id_categoria:
          type: integer
          format: int32
          example: 2
          description: Categoría del cuestionario
        id_cuestionario_original:
          type: integer
          format: int32
          nullable: true
          example: null
          description: ID del cuestionario original si es una copia
        vigente:
          type: boolean
          example: true
          description: Estado del cuestionario (tinyint)
    CuestionarioCreate:
      type: object
      required:
        - titulo
        - descripcion
        - es_publico
        - id_usuario
        - id_categoria
      properties:
        titulo:
          type: string
          example: Matemáticas Básicas
          minLength: 1
        descripcion:
          type: string
          example: Cuestionario sobre operaciones matemáticas básicas
        es_publico:
          type: boolean
          example: true
        id_usuario:
          type: integer
          format: int32
          example: 10
        id_categoria:
          type: integer
          format: int32
          example: 3
        id_cuestionario_original:
          type: integer
          format: int32
          nullable: true
          example: null
          description: Campo opcional para indicar si es copia de otro cuestionario
    CuestionarioUpdate:
      type: object
      required:
        - id_cuestionario
        - titulo
        - descripcion
        - es_publico
        - id_categoria
        - vigente
      properties:
        id_cuestionario:
          type: integer
          format: int32
          example: 1
        titulo:
          type: string
          example: Matemáticas Avanzadas
        descripcion:
          type: string
          example: Cuestionario actualizado
        es_publico:
          type: boolean
          example: false
        id_categoria:
          type: integer
          format: int32
          example: 4
        vigente:
          type: boolean
          example: true
    Pregunta:
      type: object
      properties:
        id_pregunta:
          type: integer
          format: int32
          example: 101
        id_cuestionario:
          type: integer
          format: int32
          example: 1
        pregunta:
          type: string
          maxLength: 200
          example: ¿Cuál es la capital de Francia?
        num_pregunta:
          type: integer
          format: int16
          example: 1
          description: Número de orden de la pregunta en el cuestionario (smallint)
        puntaje_base:
          type: integer
          format: int16
          nullable: true
          example: 100
          description: Puntaje base de la pregunta (smallint)
        adjunto:
          type: string
          nullable: true
          example: texto adjunto
          description: Texto adjunto a la pregunta
        tiempo:
          type: integer
          format: int16
          nullable: true
          example: 30
          default: 15
          description: Tiempo en segundos para responder (smallint, default 15)
        ruta_img:
          type: string
          maxLength: 255
          nullable: true
          example: img/cuestionarios/c_1/pregunta_101_12345.jpg
          description: Ruta de imagen adjunta a la pregunta
        vigente:
          type: boolean
          example: true
          default: true
          description: Estado de la pregunta (tinyint, default 1)
    PreguntaCreate:
      type: object
      required:
        - id_cuestionario
        - pregunta
        - num_pregunta
      properties:
        id_cuestionario:
          type: integer
          format: int32
          example: 1
        pregunta:
          type: string
          maxLength: 200
          example: ¿Qué es Python?
          minLength: 1
        num_pregunta:
          type: integer
          format: int16
          example: 2
          description: Número de pregunta (smallint)
        puntaje_base:
          type: integer
          format: int16
          nullable: true
          example: 150
          minimum: 0
          maximum: 1000
          description: Puntaje base (smallint, opcional)
        adjunto:
          type: string
          nullable: true
          example: texto adjunto opcional
          description: Texto adjunto (opcional)
        tiempo:
          type: integer
          format: int16
          nullable: true
          example: 45
          minimum: 10
          maximum: 100
          description: Tiempo en segundos (smallint, opcional, default 15)
        ruta_img:
          type: string
          maxLength: 255
          nullable: true
          example: img/cuestionarios/c_1/imagen.jpg
          description: Ruta de imagen (opcional)
    PreguntaUpdate:
      type: object
      required:
        - id_pregunta
        - pregunta
        - puntaje_base
      properties:
        id_pregunta:
          type: integer
          format: int32
          example: 101
        pregunta:
          type: string
          maxLength: 200
          example: ¿Cuál es la capital de España?
        puntaje_base:
          type: integer
          format: int16
          example: 200
          minimum: 0
          maximum: 1000
          description: Puntaje base (smallint)
    Opcion:
      type: object
      properties:
        id_opcion:
          type: integer
          format: int32
          example: 501
        opcion:
          type: string
          maxLength: 200
          example: París
          description: Texto de la opción de respuesta
        id_pregunta:
          type: integer
          format: int32
          example: 101
        es_correcta_bool:
          type: boolean
          example: true
          description: Indica si esta opción es la respuesta correcta (tinyint)
        descripcion:
          type: string
          nullable: true
          example: Descripción adicional de la opción
          description: Texto de descripción opcional
        adjunto:
          type: string
          nullable: true
          example: texto adjunto opcional
          description: Texto adjunto opcional
        vigente:
          type: boolean
          example: true
          default: true
          description: Estado de la opción (tinyint, default 1)
    OpcionCreate:
      type: object
      required:
        - opcion
        - id_pregunta
        - es_correcta_bool
      properties:
        opcion:
          type: string
          maxLength: 200
          example: Madrid
          minLength: 1
          description: Texto de la opción de respuesta
        id_pregunta:
          type: integer
          format: int32
          example: 101
        es_correcta_bool:
          type: boolean
          example: false
          description: Marcar true si es la respuesta correcta (tinyint)
        descripcion:
          type: string
          nullable: true
          example: Capital de España
          description: Descripción opcional
        adjunto:
          type: string
          nullable: true
          example: texto adjunto
          description: Texto adjunto opcional
    OpcionUpdate:
      type: object
      required:
        - id_opcion
        - opcion
      properties:
        id_opcion:
          type: integer
          format: int32
          example: 501
        opcion:
          type: string
          maxLength: 200
          example: Barcelona
          description: Nuevo texto de la opción
    Error:
      type: object
      properties:
        code:
          type: string
        message:
          type: string
      required:
        - code
        - message
  securitySchemes:
    jwt_auth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: Autenticación mediante JSON Web Token (JWT). Incluir el token en el header Authorization con el formato "Bearer {token}"