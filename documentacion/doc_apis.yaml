openapi: 3.0.4
info:
  title: DogeHoot API 1.0
  description: |-
    API de DogeHoot - Plataforma educativa de cuestionarios interactivos. Puedes encontrar la aplicación en [DogeHoot](https://dmailproject.pythonanywhere.com/).
    
    Esta API permite gestionar usuarios, cuestionarios, preguntas, partidas y más funcionalidades de la plataforma educativa.

    Links útiles:
    - [Repositorio del proyecto](https://github.com/Nicols7A4/DogeHoot)
  termsOfService: https://swagger.io/terms/
  contact:
    email: 73073168@usat.pe
  license:
    name: Apache 2.0
    url: https://www.apache.org/licenses/LICENSE-2.0.html
  version: 1.0.12
externalDocs:
  description: Más información sobre Swagger
  url: https://swagger.io
servers:
  - url: https://dmailproject.pythonanywhere.com/
tags:
  - name: usuarios
    description: Operaciones sobre usuarios de la plataforma DogeHoot
    externalDocs:
      description: Más información
      url: https://swagger.io
  - name: cuestionarios
    description: Gestión de cuestionarios educativos
    externalDocs:
      description: Más información
      url: https://swagger.io
  - name: preguntas
    description: Gestión de preguntas de los cuestionarios
  - name: opciones
    description: Gestión de opciones de respuesta de las preguntas
  - name: partidas
    description: Sesiones de juego y gestión de partidas
  - name: skin
    description: Operaciones sobre skins
  - name: categoria
    description: Operaciones sobre categorías de cuestionarios
  - name: inventario_skins
    description: Gestión de inventario de skins de usuarios
    externalDocs:
      description: Más información
      url: https://dmailproject.pythonanywhere.com/
  - name: participantes
    description: Gestión de participantes en partidas
  - name: respuestas
    description: Gestión de respuestas de participantes en partidas
paths:
  /api_obtener_usuarios:
    get:
      tags:
        - usuarios
      summary: Obtener todos los usuarios
      description: Retorna la lista completa de usuarios registrados en la plataforma
      operationId: obtenerUsuarios
      responses:
        '200':
          description: Lista de usuarios obtenida correctamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Usuario'
                  message:
                    type: string
              example:
                code: 1
                data: [{"correo": "73073168@usa.edu.pe", "id_usuario": 1, "monedas": 12062, "nombre_completo": "Victor Adolfo Pongo Calvay", "nombre_usuario": "Yaco177", "puntos": 266972, "tipo": "P", "vigente": 1},{"correo": "jcachay@usat.edu.pe", "id_usuario": 85, "monedas": 0, "nombre_completo": "Junior Eugenio Cachay Maco", "nombre_usuario": "jcachay", "puntos": 0, "tipo": "P", "vigente": 1 }]
                message: "Usuarios obtenidos con éxito"
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  message:
                    type: string
                    example: "Error al obtener usuarios, motivo: 'list' object has no attribute 'trim'"
      security:
        - jwt_auth: []
  /api_obtener_usuario_por_id/{id_usuario}:
    get:
      tags:
        - usuarios
      summary: Obtener usuario por ID
      description: Retorna la información de un usuario específico según su ID
      operationId: obtenerUsuarioPorId
      parameters:
        - name: id_usuario
          in: path
          description: ID del usuario a obtener
          required: true
          schema:
            type: integer
            format: int32
      responses:
        '200':
          description: Usuario obtenido correctamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  data:
                    $ref: '#/components/schemas/Usuario'
                  message:
                    type: string
              example:
                code: 1
                data: {"correo": "adolfopongo1705@gmail.com", "foto": "img/usuario/user_1_20251020041500.jpg","id_skin_activa": 30017,"id_usuario": 1,"monedas": 12062,"nombre_completo": "Victor Adolfo Pongo Calvay","nombre_usuario": "Yaco177","puntos": 266972, "skin_ruta": "img/skins/marco16.png", "tipo": "P", "vigente": 1}
                message: "Usuario obtenido con éxito"
        '404':
          description: Usuario no encontrado  
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  message:
                    type: string
                    example: "Usuario no encontrado"
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  message:
                    type: string
                    example: "Error al obtener usuario, motivo: <motivo>"
      security:
        - jwt_auth: []
  /api_registrar_usuario:
    post:
      tags:
        - usuarios
      summary: Registrar un nuevo usuario
      description: Crea un nuevo usuario en la plataforma con los datos proporcionados
      operationId: registrarUsuario
      requestBody:
        description: Datos del usuario a registrar
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UsuarioRegistro'
      responses:
        '201':
          description: Usuario creado exitosamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 1
                  message:
                    type: string
                    example: Usuario registrado
        '400':
          description: Datos de entrada inválidos
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  message:
                    type: string
              examples:
                datosFaltantes:
                  value:
                    code: 0
                    message: "Faltan datos requeridos"
                correoInvalido:
                  value:
                    code: 0
                    message: "Solo son válidos correos de la USAT"
                contrasenaCorta:
                  value:
                    code: 0
                    message: "La contraseña debe tener como mínimo 8 caracteres"
                sinMinuscula:
                  value:
                    code: 0
                    message: "La contraseña debe contener al menos una letra minúscula"
                sinMayuscula:
                  value:
                    code: 0
                    message: "La contraseña debe contener al menos una letra mayúscula"
                sinNumero:
                  value:
                    code: 0
                    message: "La contraseña debe contener al menos un número"
                sinSimbolo:
                  value:
                    code: 0
                    message: "La contraseña debe contener al menos un símbolo especial"
                tipoInvalido:
                  value:
                    code: 0
                    message: "Tipo de usuario inválido"
        '409':
          description: Conflicto - Usuario ya existe
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  message:
                    type: string
              examples:
                correoEnUso:
                  value:
                    code: 0
                    message: "Conflicto. El correo ya está en uso"
                usuarioEnUso:
                  value:
                    code: 0
                    message: "Conflicto. El nombre de usuario ya está en uso"
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  message:
                    type: string
                    example: "Error al registrar usuario, motivo: <motivo>"
      security:
        - jwt_auth: []
  /api_actualizar_usuario:
    put:
      tags:
        - usuarios
      summary: Actualizar información de usuario
      description: Actualiza los datos de un usuario existente
      operationId: actualizarUsuario
      requestBody:
        description: Datos del usuario a actualizar
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UsuarioActualizacion'
      responses:
        '200':
          description: Usuario actualizado exitosamente
          content:
            application/json:
              schema:
                properties:
                  code:
                    type: integer
                    
                  data:
                    $ref: '#/components/schemas/Usuario'
                  message:
                    type: string
              example:
                code: 1
                data: {"correo": "abc123@usat.pe","foto": null,"id_skin_activa": null,"id_usuario": 30094,"monedas": 500,"nombre_completo": "Alberto Benavides,Carrión","nombre_usuario": "ABC123_XYZ","puntos": 1700,"skin_ruta": null,"tipo": "P","vigente": 0}
                message: Usuario actualizado con éxito
        '400':
          description: Datos inválidos
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  message:
                    type: string
              examples:
                datosFaltantes:
                  value:
                    code: 0
                    message: "Faltan datos requeridos"
                tipoInvalido:
                  value:
                    code: 0
                    message: "Error: Tipo de usuario inválido"
                monedasInvalidas:
                  value:
                    code: 0
                    message: "Error: Cantidad de monedas inválida"
                puntosInvalidos:
                  value:
                    code: 0
                    message: "Error: Cantidad de puntos inválida"
        '404':
          description: Usuario no encontrado
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  message:
                    type: string
                    example: "Usuario no encontrado"
        '409':
          description: Conflicto - Correo o nombre de usuario ya existe
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  message:
                    type: string
              examples:
                correoEnUso:
                  value:
                    code: 0
                    message: "Conflicto: El correo ya está en uso"
                usuarioEnUso:
                  value:
                    code: 0
                    message: "Conflicto: El nombre de usuario ya está en uso"
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0                      
                  message:
                    type: string
                    example: "Error al actualizar usuario, motivo: <motivo>"
      security:
        - jwt_auth: []
  /api_eliminar_usuario:
    post:
      tags:
        - usuarios
      summary: Eliminar (desactivar) usuario
      description: Desactiva un usuario de la plataforma (no se elimina físicamente). Envía el id_usuario en el body JSON.
      operationId: eliminarUsuario
      requestBody:
        description: ID del usuario a eliminar
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - id_usuario
              properties:
                id_usuario:
                  type: integer
                  format: int32
                  example: 5
      responses:
        '200':
          description: Usuario desactivado exitosamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 1
                  message:
                    type: string
                    example: "Usuario desactivado con éxito"
                  data:
                    type: object
                    properties:
                      id_usuario:
                        type: integer
                        example: 5
                      vigente:
                        type: boolean
                        example: false
        '400':
          description: Datos de entrada inválidos
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  message:
                    type: string
                    example: Faltan datos requeridos
        '404':
          description: Usuario no encontrado
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  message:
                    type: string
                    example: Usuario no encontrado
        '500':
          description: Error al desactivar usuario
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  message:
                    type: string
              examples:
                noSeAfectaron:
                  value:
                    code: 0
                    message: "No se pudo desactivar el usuario"
                errorInterno:
                  value:
                    code: 0
                    message: "Error al desactivar usuario, motivo: <motivo>"
      security:
        - jwt_auth: []
  /api_registrarskin:
    post:
      tags:
        - skin
      summary: Insertar Skin
      description: Registra una nueva skin en la base de datos.
      operationId: registrarSkin
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SkinCreate'
      responses:
        '201':
          description: Skin creada correctamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 1
                  message:
                    type: string
                    example: "Skin creada correctamente"
        '400':
          description: Datos de entrada inválidos
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  message:
                    type: string
              examples:
                datosIncompletos:
                  value:
                    code: 0
                    message: "Faltan datos requeridos"
                tipoInvalido:
                  value:
                    code: 0
                    message: "tipo debe ser 'marco' o 'fondo'."
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  message:
                    type: string
                    example: "Error al crear skin, motivo: <motivo>"
      security:
        - jwt_auth: []
  /api_obtenerskins:
    get:
      tags:
        - skin
      summary: Obtener Skins
      description: Retorna la lista de skins disponibles.
      operationId: obtenerSkins
      responses:
        '200':
          description: Skins obtenidas correctamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 1
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Skin'
                  message:
                    type: string
                    example: "Skins obtenidas correctamente"
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  message:
                    type: string
                    example: "Error al obtener skins, motivo: <motivo>"
      security:
        - jwt_auth: []
  /api_obtenerskinporid/{id}:
    get:
      tags:
        - skin
      summary: Obtener Skin por ID
      description: Retorna una skin por su identificador.
      operationId: obtenerSkinPorId
      parameters:
        - name: id
          in: path
          description: ID de la skin a obtener
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Skin obtenida correctamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 1
                  data:
                    $ref: '#/components/schemas/Skin'
                  message:
                    type: string
                    example: "Skin obtenida correctamente"
        '404':
          description: Skin no encontrada
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  message:
                    type: string
                    example: "Skin no encontrada"
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  message:
                    type: string
                    example: "Error al obtener skin, motivo: <motivo>"
      security:
        - jwt_auth: []
  /api_actualizarskin/{id}:
    put:
      tags:
        - skin
      summary: Actualizar Skin
      description: Actualiza una skin existente.
      operationId: actualizarSkin
      parameters:
        - name: id
          in: path
          description: ID de la skin a actualizar
          required: true
          schema:
            type: integer
            format: int64
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SkinUpdate'
      responses:
        '200':
          description: Skin actualizada correctamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 1
                  message:
                    type: string
                    example: "Skin actualizada correctamente"
        '400':
          description: Datos inválidos
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  message:
                    type: string
              examples:
                sinCambios:
                  value:
                    code: 0
                    message: "No se enviaron campos a actualizar."
                tipoInvalido:
                  value:
                    code: 0
                    message: "tipo debe ser 'marco' o 'fondo'."
        '404':
          description: Skin no encontrada
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  message:
                    type: string
                    example: "Skin no encontrada"
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  message:
                    type: string
                    example: "Error al actualizar skin, motivo: <motivo>"
      security:
        - jwt_auth: []
  /api_eliminarskin/{id}:
    delete:
      tags:
        - skin
      summary: Eliminar Skin
      description: Elimina una skin por su id.
      operationId: eliminarSkin
      parameters:
        - name: id
          in: path
          description: ID de la skin a eliminar
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Skin eliminada correctamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 1
                  message:
                    type: string
                    example: "Skin eliminada correctamente"
        '404':
          description: Skin no encontrada
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  message:
                    type: string
                    example: "Skin no encontrada"
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  message:
                    type: string
                    example: "Error al eliminar skin, motivo: <motivo>"
      security:
        - jwt_auth: []
  /api_obtener_cuestionarios:
    get:
      tags:
        - cuestionarios
      summary: Obtener todos los cuestionarios
      description: Retorna la lista completa de cuestionarios registrados
      operationId: obtenerCuestionarios
      responses:
        '200':
          description: Cuestionarios obtenidos correctamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 1
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Cuestionario'
                  message:
                    type: string
                    example: "Cuestionarios obtenidos con éxito"
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  message:
                    type: string
                    example: "Error al obtener cuestionarios, motivo: <motivo>"
      security:
        - jwt_auth: []
  /api_registrarcategoria:
    post:
      tags:
        - categoria
      summary: Insertar Categoría
      description: Registra una nueva categoría en la base de datos.
      operationId: registrarCategoria
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CategoriaCreate'
      responses:
        '201':
          description: Categoría creada correctamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 1
                  data:
                    type: object
                    properties:
                      id_categoria:
                        type: integer
                        example: 30008
                  message:
                    type: string
                    example: "Categoría creada correctamente"
        '400':
          description: Datos de entrada inválidos
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  data:
                    type: object
                  message:
                    type: string
                    example: "categoria es obligatorio."
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  data:
                    type: object
                  message:
                    type: string
                    example: "Error al crear categoría, motivo: <motivo>"
      security:
        - jwt_auth: []
  /api_obtenercategorias:
    get:
      tags:
        - categoria
      summary: Obtener Categorías
      description: Retorna la lista de categorías disponibles.
      operationId: obtenerCategorias
      responses:
        '200':
          description: Categorías obtenidas correctamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 1
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Categoria'
                  message:
                    type: string
                    example: "Categorías obtenidas correctamente"
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  data:
                    type: object
                  message:
                    type: string
                    example: "Error al obtener categorías, motivo: <motivo>"
      security:
        - jwt_auth: []
  /api_obtener_cuestionario_por_id/{id_cuestionario}:
    get:
      tags:
        - cuestionarios
      summary: Obtener cuestionario por ID
      description: Retorna la información de un cuestionario específico
      operationId: obtenerCuestionarioPorId
      parameters:
        - name: id_cuestionario
          in: path
          description: ID del cuestionario a obtener
          required: true
          schema:
            type: integer
            format: int32
      responses:
        '200':
          description: Cuestionario obtenido correctamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 1
                  data:
                    $ref: '#/components/schemas/Cuestionario'
                  message:
                    type: string
                    example: "Cuestionario obtenido con éxito"
        '404':
          description: Cuestionario no encontrado
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  message:
                    type: string
                    example: "Cuestionario no encontrado"
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  message:
                    type: string
                    example: "Error al obtener cuestionario, motivo: <motivo>"
      security:
        - jwt_auth: []
  /api_registar_cuestionario:
    post:
      tags:
        - cuestionarios
      summary: Registrar nuevo cuestionario
      description: Crea un nuevo cuestionario en la plataforma
      operationId: registrarCuestionario
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CuestionarioCreate'
      responses:
        '201':
          description: Cuestionario creado exitosamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 1
                  message:
                    type: string
                    example: "Cuestionario creado con éxito"
        '400':
          description: Faltan datos requeridos
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  message:
                    type: string
                    example: "Faltan datos requeridos"
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  message:
                    type: string
                    example: "Error al crear cuestionario, motivo: <motivo>"
      security:
        - jwt_auth: []
  /api_obtenercategoriaporid/{id}:
    get:
      tags:
        - categoria
      summary: Obtener Categoría por ID
      description: Retorna una categoría por su identificador.
      operationId: obtenerCategoriaPorId
      parameters:
        - name: id
          in: path
          description: ID de la categoría a obtener
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Categoría obtenida correctamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 1
                  data:
                    $ref: '#/components/schemas/Categoria'
                  message:
                    type: string
                    example: "Categoría obtenida correctamente"
        '404':
          description: Categoría no encontrada
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  data:
                    type: object
                  message:
                    type: string
                    example: "Categoría no encontrada"
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  data:
                    type: object
                  message:
                    type: string
                    example: "Error al obtener categoría, motivo: <motivo>"
      security:
        - jwt_auth: []
  /api_actualizar_cuestionario:
    put:
      tags:
        - cuestionarios
      summary: Actualizar cuestionario
      description: Actualiza la información de un cuestionario existente
      operationId: actualizarCuestionario
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CuestionarioUpdate'
      responses:
        '200':
          description: Cuestionario actualizado exitosamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 1
                  message:
                    type: string
                    example: "Cuestionario actualizado con éxito"
        '400':
          description: Faltan datos requeridos
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  message:
                    type: string
                    example: "Faltan datos requeridos"
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  message:
                    type: string
                    example: "Error al actualizar cuestionario, motivo: <motivo>"
      security:
        - jwt_auth: []
  /api_eliminar_cuestionario:
    post:
      tags:
        - cuestionarios
      summary: Eliminar cuestionario
      description: Desactiva un cuestionario (eliminación lógica). Envía el id_cuestionario en el body JSON.
      operationId: eliminarCuestionario
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - id_cuestionario
              properties:
                id_cuestionario:
                  type: integer
                  format: int32
                  example: 210028
      responses:
        '200':
          description: Cuestionario desactivado exitosamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 1
                  message:
                    type: string
                    example: "Cuestionario desactivado con éxito"
        '400':
          description: Faltan datos requeridos
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  message:
                    type: string
                    example: "Faltan datos requeridos"
        '404':
          description: Cuestionario no encontrado
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  message:
                    type: string
                    example: "Cuestionario no encontrado"
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  message:
                    type: string
                    example: "Error al eliminar cuestionario, motivo: <motivo>"
      security:
        - jwt_auth: []
  /api_obtener_preguntas:
    get:
      tags:
        - preguntas
      summary: Obtener todas las preguntas
      description: Retorna la lista completa de preguntas
      operationId: obtenerPreguntas
      responses:
        '200':
          description: Preguntas obtenidas correctamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 1
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Pregunta'
                  message:
                    type: string
                    example: "Preguntas obtenidas con éxito"
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  message:
                    type: string
                    example: "Error al obtener preguntas, motivo: <motivo>"
      security:
        - jwt_auth: []
  /api_obtener_pregunta_por_id/{id_pregunta}:
    get:
      tags:
        - preguntas
      summary: Obtener pregunta por ID
      description: Retorna la información de una pregunta específica
      operationId: obtenerPreguntaPorId
      parameters:
        - name: id_pregunta
          in: path
          description: ID de la pregunta a obtener
          required: true
          schema:
            type: integer
            format: int32
      responses:
        '200':
          description: Pregunta obtenida correctamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 1
                  data:
                    $ref: '#/components/schemas/Pregunta'
                  message:
                    type: string
                    example: "Pregunta obtenida con éxito"
        '404':
          description: Pregunta no encontrada
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  message:
                    type: string
                    example: "Pregunta no encontrada"
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  message:
                    type: string
                    example: "Error al obtener pregunta, motivo: <motivo>"
      security:
        - jwt_auth: []
  /api_registrar_pregunta:
    post:
      tags:
        - preguntas
      summary: Registrar nueva pregunta
      description: Crea una nueva pregunta en un cuestionario
      operationId: registrarPregunta
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PreguntaCreate'
      responses:
        '201':
          description: Pregunta creada exitosamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 1
                  message:
                    type: string
                    example: "Pregunta creada con éxito"
        '400':
          description: Faltan datos requeridos o validación fallida
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  message:
                    type: string
              examples:
                datosFaltantes:
                  value:
                    code: 0
                    message: "Faltan datos requeridos"
                tiempoInvalido:
                  value:
                    code: 0
                    message: "Tiempo de pregunta inválido (debe estar entre 10 y 100)"
                puntajeInvalido:
                  value:
                    code: 0
                    message: "Puntaje de pregunta inválido (debe estar entre 0 y 1000)"
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  message:
                    type: string
                    example: "Error al crear pregunta, motivo: <motivo>"
      security:
        - jwt_auth: []
  /api_actualizar_pregunta:
    put:
      tags:
        - preguntas
      summary: Actualizar pregunta
      description: Actualiza la información de una pregunta existente
      operationId: actualizarPregunta
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PreguntaUpdate'
      responses:
        '200':
          description: Pregunta actualizada exitosamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 1
                  message:
                    type: string
                    example: "Pregunta actualizada con éxito"
        '400':
          description: Faltan datos requeridos
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  message:
                    type: string
                    example: "Faltan datos requeridos"
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  message:
                    type: string
                    example: "Error al actualizar pregunta, motivo: <motivo>"
      security:
        - jwt_auth: []
  /api_eliminar_pregunta:
    post:
      tags:
        - preguntas
      summary: Eliminar pregunta
      description: Elimina lógicamente una pregunta. Envía el id_pregunta en el body JSON.
      operationId: eliminarPregunta
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - id_pregunta
              properties:
                id_pregunta:
                  type: integer
                  format: int32
                  example: 330192
      responses:
        '200':
          description: Pregunta eliminada exitosamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 1
                  message:
                    type: string
                    example: "Pregunta eliminada con éxito"
        '400':
          description: Faltan datos requeridos
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  message:
                    type: string
                    example: "Faltan datos requeridos"
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  message:
                    type: string
                    example: "Error al eliminar pregunta, motivo: <motivo>"
      security:
        - jwt_auth: []
  /api_obtener_opciones:
    get:
      tags:
        - opciones
      summary: Obtener todas las opciones
      description: Retorna la lista completa de opciones de respuesta
      operationId: obtenerOpciones
      responses:
        '200':
          description: Opciones obtenidas correctamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 1
                  data:
                    type: array
                    items:
                      $ref: '#/components/schemas/Opcion'
                  message:
                    type: string
                    example: "Opciones obtenidas con éxito"
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  message:
                    type: string
                    example: "Error al obtener opciones, motivo: <motivo>"
      security:
        - jwt_auth: []
  /api_obtener_opcion_por_id/{id_opcion}:
    get:
      tags:
        - opciones
      summary: Obtener opción por ID
      description: Retorna la información de una opción específica
      operationId: obtenerOpcionPorId
      parameters:
        - name: id_opcion
          in: path
          description: ID de la opción a obtener
          required: true
          schema:
            type: integer
            format: int32
      responses:
        '200':
          description: Opción obtenida correctamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 1
                  data:
                    $ref: '#/components/schemas/Opcion'
                  message:
                    type: string
                    example: "Opción obtenida con éxito"
        '404':
          description: Opción no encontrada
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  message:
                    type: string
                    example: "Opción no encontrada"
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  message:
                    type: string
                    example: "Error al obtener opción, motivo: <motivo>"
      security:
        - jwt_auth: []
  /api_registar_opcion:
    post:
      tags:
        - opciones
      summary: Registrar nueva opción
      description: Crea una nueva opción de respuesta para una pregunta
      operationId: registrarOpcion
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OpcionCreate'
      responses:
        '201':
          description: Opción creada exitosamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 1
                  message:
                    type: string
                    example: "Opción creada con éxito"
        '400':
          description: Faltan datos requeridos
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  message:
                    type: string
                    example: "Faltan datos requeridos"
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  message:
                    type: string
                    example: "Error al crear opción, motivo: <motivo>"
      security:
        - jwt_auth: []
  /api_eliminarcategoria/{id}:
    delete:
      tags:
        - categoria
      summary: Eliminar Categoría
      description: Elimina una categoría por su id.
      operationId: eliminarCategoria
      parameters:
        - name: id
          in: path
          description: ID de la categoría a eliminar
          required: true
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Categoría eliminada correctamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 1
                  data:
                    type: object
                  message:
                    type: string
                    example: "Categoría eliminada correctamente"
        '404':
          description: Categoría no encontrada
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  data:
                    type: object
                  message:
                    type: string
                    example: "Categoría no encontrada"
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  data:
                    type: object
                  message:
                    type: string
                    example: "Error al eliminar categoría, motivo: <motivo>"
      security:
        - jwt_auth: []
  /api_actualizar_opcion:
    put:
      tags:
        - opciones
      summary: Actualizar opción
      description: Actualiza la información de una opción existente
      operationId: actualizarOpcion
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OpcionUpdate'
      responses:
        '200':
          description: Opción actualizada exitosamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 1
                  message:
                    type: string
                    example: "Opción actualizada con éxito"
        '400':
          description: Faltan datos requeridos
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  message:
                    type: string
                    example: "Faltan datos requeridos"
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  message:
                    type: string
                    example: "Error al actualizar opción, motivo: <motivo>"
      security:
        - jwt_auth: []
  /api_eliminar_opcion:
    post:
      tags:
        - opciones
      summary: Eliminar opción
      description: Elimina lógicamente una opción de respuesta. Envía el id_opcion en el body JSON.
      operationId: eliminarOpcion
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              required:
                - id_opcion
              properties:
                id_opcion:
                  type: integer
                  format: int32
                  example: 440245
      responses:
        '200':
          description: Opción eliminada exitosamente
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 1
                  message:
                    type: string
                    example: "Opción eliminada con éxito"
        '400':
          description: Faltan datos requeridos
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  message:
                    type: string
                    example: "Faltan datos requeridos"
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                    example: 0
                  message:
                    type: string
                    example: "Error al eliminar opción, motivo: <motivo>"
      security:
        - jwt_auth: []
  /api_registrarpartida:
    post:
      tags:
        - partidas
      summary: Crea una nueva partida
      description: Crea un registro completo en la tabla PARTIDA.
      security:
        - jwt_auth: []
      requestBody:
        required: true
        description: Datos necesarios para crear una partida.
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PartidaCreate'
      responses:
        '201':
          description: Partida creada correctamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RptaCrearPartida'
        '400':
          description: pin, id_cuestionario, modalidad, estado y fecha_hora_inicio son obligatorios.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  data:
                    type: object
                  message:
                    type: string
                    example: "pin, id_cuestionario, modalidad, estado y fecha_hora_inicio son obligatorios."
        '500':
          description: No se pudo crear la partida {e}
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  data:
                    type: object
                  message:
                    type: string
                    example: "No se pudo crear la partida: error"
  /api_obtenerpartidas:
    get:
      tags:
        - partidas
      summary: Listado de todas las partidas
      description: Retorna la lista de partidas en la BD, ordenadas por id_partida DESC.
      security:
        - jwt_auth: []
      responses:
        '200':
          description: Partidas obtenidas correctamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RptaListaPartida'
        '500':
          description: No se pudieron obtener las partidas {e}
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  data:
                    type: object
                  message:
                    type: string
                    example: "No se pudieron obtener las partidas: error"
  /api_obtenerpartidaporid/{id_partida}:
    get:
      tags:
        - partidas
      summary: Obtener una partida por ID
      description: Retorna una partida específica según su id_partida.
      security:
        - jwt_auth: []
      parameters:
        - name: id_partida
          in: path
          required: true
          description: ID de la partida a buscar.
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Partida obtenida correctamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RptaPartida'
        '404':
          description: Partida no encontrada
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  data:
                    type: object
                  message:
                    type: string
                    example: "Partida no encontrada"
        '500':
          description: No se pudo obtener la partida {e}
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  data:
                    type: object
                  message:
                    type: string
                    example: "No se pudo obtener la partida: error"
  /api_actualizarpartida/{id_partida}:
    put:
      tags:
        - partidas
      summary: Actualizar una partida
      description: Actualiza uno o varios campos de una partida existente.
      security:
        - jwt_auth: []
      parameters:
        - name: id_partida
          in: path
          required: true
          description: ID de la partida a actualizar.
          schema:
            type: integer
            format: int64
      requestBody:
        required: true
        description: Campos a actualizar (solo se actualizan los campos enviados).
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PartidaUpdate'
      responses:
        '200':
          description: Partida actualizada correctamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
        '400':
          description: No se enviaron campos a actualizar.
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  data:
                    type: object
                  message:
                    type: string
                    example: "No se enviaron campos a actualizar."
        '404':
          description: Partida no encontrada
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  data:
                    type: object
                  message:
                    type: string
                    example: "Partida no encontrada"
        '500':
          description: No se pudo actualizar la partida {e}
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  data:
                    type: object
                  message:
                    type: string
                    example: "No se pudo actualizar la partida: error"
  /api_eliminarpartida/{id_partida}:
    delete:
      tags:
        - partidas
      summary: Eliminar una partida
      description: Elimina una partida por su ID.
      security:
        - jwt_auth: []
      parameters:
        - name: id_partida
          in: path
          required: true
          description: ID de la partida a eliminar.
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Partida eliminada correctamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
        '404':
          description: Partida no encontrada
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  data:
                    type: object
                  message:
                    type: string
                    example: "Partida no encontrada"
        '500':
          description: No se pudo eliminar la partida {e}
          content:
            application/json:
              schema:
                type: object
                properties:
                  code:
                    type: integer
                  data:
                    type: object
                  message:
                    type: string
                    example: "No se pudo eliminar la partida: error"
  /api_registrarinventario:
    post:
      tags:
        - inventario_skins
      summary: Registrar una skin al inventario del usuario
      description: Inserta un registro en la tabla INVENTARIO_SKINS.
      security:
        - jwt_auth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/InventarioInsert'
      responses:
        '201':
          description: Inventario registrado correctamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RptaStandar'
        '400':
          description: Datos incompletos o inválidos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
        '500':
          description: Error interno al registrar el inventario
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
  /api_actualizarinventario/{id_usuario}/{id_skin}:
    put:
      tags:
        - inventario_skins
      summary: Actualiza una skin del inventario
      description: Cambia el id_skin de un registro existente.
      security:
        - jwt_auth: []
      parameters:
        - in: path
          name: id_usuario
          required: true
          description: ID del usuario
          schema:
            type: integer
            format: int64
        - in: path
          name: id_skin
          required: true
          description: ID de la skin actual
          schema:
            type: integer
            format: int64
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/InventarioUpdate'
      responses:
        '200':
          description: Registro actualizado correctamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RptaStandar'
        '400':
          description: Datos inválidos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
        '404':
          description: Registro no encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
        '500':
          description: Error interno al actualizar el inventario
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
  /api_eliminarinventario/{id_usuario}/{id_skin}:
    delete:
      tags:
        - inventario_skins
      summary: Elimina una skin del inventario de un usuario
      description: Elimina un registro específico de INVENTARIO_SKINS.
      security:
        - jwt_auth: []
      parameters:
        - in: path
          name: id_usuario
          required: true
          description: ID del usuario
          schema:
            type: integer
            format: int64
        - in: path
          name: id_skin
          required: true
          description: ID de la skin a eliminar
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Registro eliminado correctamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RptaStandar'
        '404':
          description: Registro no encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
        '500':
          description: Error interno al eliminar el inventario
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
  /api_obtenerinventarios:
    get:
      tags:
        - inventario_skins
      summary: Lista de todos los inventarios de skins
      description: Retorna todos los registros de INVENTARIO_SKINS junto con información del usuario y la skin.
      security:
        - jwt_auth: []
      responses:
        '200':
          description: Inventarios obtenidos correctamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RptaListaInventario'
        '500':
          description: Error interno al obtener los inventarios
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
  /api_obtenerinventarioporusuario/{id_usuario}:
    get:
      tags:
        - inventario_skins
      summary: Lista de skins que posee un usuario
      description: Retorna todas las skins del inventario de un usuario específico.
      security:
        - jwt_auth: []
      parameters:
        - in: path
          name: id_usuario
          required: true
          description: ID del usuario
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Inventario del usuario obtenido correctamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RptaListaSkinsUsuario'
        '404':
          description: Usuario no encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
        '500':
          description: Error interno al obtener el inventario del usuario
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ApiResponse'
  /api_registrar_participante:
    post:
      tags:
        - participantes
      summary: Crear un nuevo participante
      description: Registra un participante en una partida
      security:
        - jwt_auth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ParticipanteCreate'
      responses:
        '201':
          description: Participante creado correctamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RespuestaEstandar'
        '400':
          description: Datos inválidos o incompletos
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RespuestaEstandar'
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RespuestaEstandar'
  /api_obtener_participantes:
    get:
      tags:
        - participantes
      summary: Listar todos los participantes
      description: Retorna la lista completa de participantes registrados
      security:
        - jwt_auth: []
      responses:
        '200':
          description: Lista de participantes obtenida correctamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RespuestaEstandar'
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RespuestaEstandar'
  /api_obtener_participante_por_id/{id_participante}:
    get:
      tags:
        - participantes
      summary: Obtener participante por ID
      description: Retorna un participante específico según su ID
      security:
        - jwt_auth: []
      parameters:
        - in: path
          name: id_participante
          required: true
          description: ID del participante
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Participante encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RespuestaEstandar'
        '404':
          description: Participante no encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RespuestaEstandar'
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RespuestaEstandar'
  /api_actualizar_participante/{id_participante}:
    put:
      tags:
        - participantes
      summary: Actualizar un participante
      description: Actualiza los datos de un participante existente
      security:
        - jwt_auth: []
      parameters:
        - in: path
          name: id_participante
          required: true
          description: ID del participante a actualizar
          schema:
            type: integer
            format: int64
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ParticipanteUpdate'
      responses:
        '200':
          description: Participante actualizado correctamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RespuestaEstandar'
        '404':
          description: Participante no encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RespuestaEstandar'
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RespuestaEstandar'
  /api_eliminar_participante/{id_participante}:
    delete:
      tags:
        - participantes
      summary: Eliminar un participante
      description: Elimina un participante del sistema
      security:
        - jwt_auth: []
      parameters:
        - in: path
          name: id_participante
          required: true
          description: ID del participante a eliminar
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Participante eliminado correctamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RespuestaEstandar'
        '404':
          description: Participante no encontrado
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RespuestaEstandar'
        '409':
          description: Conflicto al eliminar participante
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RespuestaEstandar'
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RespuestaEstandar'
  /api_registrar_respuesta:
    post:
      tags:
        - respuestas
      summary: Registrar una respuesta
      description: Registra la respuesta de un participante a una pregunta
      security:
        - jwt_auth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RespuestaCreate'
      responses:
        '201':
          description: Respuesta registrada correctamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RespuestaEstandar'
        '400':
          description: Datos inválidos o error de integridad
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RespuestaEstandar'
        '409':
          description: Respuesta duplicada
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RespuestaEstandar'
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RespuestaEstandar'
  /api_obtener_respuestas:
    get:
      tags:
        - respuestas
      summary: Listar todas las respuestas
      description: Retorna la lista completa de respuestas registradas
      security:
        - jwt_auth: []
      responses:
        '200':
          description: Lista de respuestas obtenida correctamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RespuestaEstandar'
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RespuestaEstandar'
  /api_obtener_respuesta_por_id/{id_respuesta}:
    get:
      tags:
        - respuestas
      summary: Obtener respuesta por ID
      description: Retorna una respuesta específica según su ID
      security:
        - jwt_auth: []
      parameters:
        - in: path
          name: id_respuesta
          required: true
          description: ID de la respuesta
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Respuesta encontrada
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RespuestaEstandar'
        '404':
          description: Respuesta no encontrada
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RespuestaEstandar'
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RespuestaEstandar'
  /api_actualizar_respuesta/{id_respuesta}:
    put:
      tags:
        - respuestas
      summary: Actualizar una respuesta
      description: Actualiza los datos de una respuesta existente
      security:
        - jwt_auth: []
      parameters:
        - in: path
          name: id_respuesta
          required: true
          description: ID de la respuesta a actualizar
          schema:
            type: integer
            format: int64
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/RespuestaUpdate'
      responses:
        '200':
          description: Respuesta actualizada correctamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RespuestaEstandar'
        '404':
          description: Respuesta no encontrada
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RespuestaEstandar'
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RespuestaEstandar'
  /api_eliminar_respuesta/{id_respuesta}:
    delete:
      tags:
        - respuestas
      summary: Eliminar una respuesta
      description: Elimina una respuesta del sistema
      security:
        - jwt_auth: []
      parameters:
        - in: path
          name: id_respuesta
          required: true
          description: ID de la respuesta a eliminar
          schema:
            type: integer
            format: int64
      responses:
        '200':
          description: Respuesta eliminada correctamente
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RespuestaEstandar'
        '404':
          description: Respuesta no encontrada
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RespuestaEstandar'
        '500':
          description: Error interno del servidor
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/RespuestaEstandar'
components:
  schemas:
    Usuario:
      type: object
      properties:
        id_usuario:
          type: integer
          format: int32
          example: 1
        nombre_completo:
          type: string
          example: Juan Pérez García
        correo:
          type: string
          format: email
          example: juan.perez@usat.edu.pe
        nombre_usuario:
          type: string
          example: juanperez
        foto:
          type: string
          nullable: true
          example: /static/img/usuario/user123.jpg
        tipo:
          type: string
          enum: [E, P, A]
          description: Tipo de usuario - E (Estudiante), P (Profesor), A (Administrador)
          example: E
        puntos:
          type: integer
          format: int32
          nullable: true
          example: 1500
        monedas:
          type: integer
          format: int32
          nullable: true
          example: 250
        vigente:
          type: boolean
          example: true
        verificado:
          type: boolean
          example: true
        id_skin_activa:
          type: integer
          format: int32
          nullable: true
          example: 3
    UsuarioRegistro:
      type: object
      required:
        - nombre_completo
        - nombre_usuario
        - correo
        - contrasena
      properties:
        nombre_completo:
          type: string
          example: María López Torres
          minLength: 1
        nombre_usuario:
          type: string
          example: marialopez
          minLength: 1
          maxLength: 18
        correo:
          type: string
          format: email
          example: maria.lopez@usat.edu.pe
          description: Debe ser un correo @usat.edu.pe o @usat.pe
        contrasena:
          type: string
          format: password
          example: Password123!
          minLength: 8
          description: Debe contener al menos 8 caracteres, mayúsculas, minúsculas, números y símbolos especiales
        tipo:
          type: string
          enum: [E, P]
          example: P
          description: Tipo de usuario - E (Estudiante), P (Profesor). Se determina automáticamente por el dominio del correo
    UsuarioActualizacion:
      type: object
      required:
        - id_usuario
      properties:
        id_usuario:
          type: integer
          format: int32
          example: 5
        nombre_completo:
          type: string
          example: Juan Pérez García
        nombre_usuario:
          type: string
          example: juanperez
          maxLength: 18
        correo:
          type: string
          format: email
          example: juan.perez@usat.edu.pe
        tipo:
          type: string
          enum: [E, P, A]
          example: E
        puntos:
          type: integer
          format: int32
          minimum: 0
          example: 2000
        monedas:
          type: integer
          format: int32
          minimum: 0
          example: 300
        vigente:
          type: boolean
          example: true
    ApiResponse:
      type: object
      properties:
        code:
          type: integer
          example: 1
        data:
          type: object
          nullable: true
          example: {}
        message:
          type: string
          example: Operación realizada con éxito
    Skin:
      type: object
      properties:
        id_skin:
          type: integer
          format: int64
          example: 60004
        ruta:
          type: string
          example: img/skins/skin_prueba.png
        tipo:
          type: string
          enum: [marco, fondo]
          example: marco
          description: Tipo de skin
        precio:
          type: integer
          example: 150
          description: Precio en monedas de la plataforma
        vigente:
          type: integer
          example: 1
          description: 1 si está activa, 0 si está desactivada
    SkinCreate:
      type: object
      required:
        - ruta
        - tipo
        - precio
      properties:
        ruta:
          type: string
          example: img/skins/skin_prueba.png
          description: Ruta de la imagen de la skin
        tipo:
          type: string
          enum: [marco, fondo]
          example: marco
          description: Tipo de skin
        precio:
          type: integer
          example: 150
          minimum: 0
          description: Precio en monedas
        vigente:
          type: integer
          example: 1
          default: 1
          description: Estado de la skin (1 activa, 0 inactiva)
    SkinUpdate:
      type: object
      properties:
        ruta:
          type: string
          example: img/skins/skin_actualizada.png
          description: Nueva ruta de la imagen
        tipo:
          type: string
          enum: [marco, fondo]
          example: fondo
          description: Nuevo tipo de skin
        precio:
          type: integer
          example: 200
          minimum: 0
          description: Nuevo precio
        vigente:
          type: integer
          example: 1
          description: Nuevo estado (1 activa, 0 inactiva)
    Cuestionario:
      type: object
      properties:
        id_cuestionario:
          type: integer
          format: int32
          example: 1
        titulo:
          type: string
          maxLength: 200
          example: Introducción a Python
        descripcion:
          type: string
          example: Cuestionario básico sobre conceptos de Python
        es_publico:
          type: boolean
          example: 1
          description: Indica si el cuestionario es público o privado (tinyint)
        fecha_hora_creacion:
          type: string
          format: date-time
          example: "Sat, 11 Oct 2025 21:30:00 GMT"
          description: Fecha y hora de creación del cuestionario
        id_usuario:
          type: integer
          format: int32
          example: 5
          description: ID del creador del cuestionario
        id_categoria:
          type: integer
          format: int32
          example: 2
          description: Categoría del cuestionario
        id_cuestionario_original:
          type: integer
          format: int32
          nullable: true
          example: null
          description: ID del cuestionario original si es una copia
        vigente:
          type: boolean
          example: 1
          description: Estado del cuestionario (tinyint)
    CuestionarioCreate:
      type: object
      required:
        - titulo
        - descripcion
        - es_publico
        - id_usuario
        - id_categoria
      properties:
        titulo:
          type: string
          example: Matemáticas Básicas
          minLength: 1
        descripcion:
          type: string
          example: Cuestionario sobre operaciones matemáticas básicas
        es_publico:
          type: boolean
          example: true
        id_usuario:
          type: integer
          format: int32
          example: 10
        id_categoria:
          type: integer
          format: int32
          example: 3
        id_cuestionario_original:
          type: integer
          format: int32
          nullable: true
          example: null
          description: Campo opcional para indicar si es copia de otro cuestionario
    CuestionarioUpdate:
      type: object
      required:
        - id_cuestionario
        - titulo
        - descripcion
        - es_publico
        - id_categoria
        - vigente
      properties:
        id_cuestionario:
          type: integer
          format: int32
          example: 1
        titulo:
          type: string
          example: Matemáticas Avanzadas
        descripcion:
          type: string
          example: Cuestionario actualizado
        es_publico:
          type: boolean
          example: false
        id_categoria:
          type: integer
          format: int32
          example: 4
        vigente:
          type: boolean
          example: true
    Pregunta:
      type: object
      properties:
        id_pregunta:
          type: integer
          format: int32
          example: 101
        id_cuestionario:
          type: integer
          format: int32
          example: 1
        pregunta:
          type: string
          maxLength: 200
          example: ¿Cuál es la capital de Francia?
        num_pregunta:
          type: integer
          format: int16
          example: 1
          description: Número de orden de la pregunta en el cuestionario (smallint)
        puntaje_base:
          type: integer
          format: int16
          nullable: true
          example: 100
          description: Puntaje base de la pregunta (smallint)
        adjunto:
          type: string
          nullable: true
          example: texto adjunto
          description: Texto adjunto a la pregunta
        tiempo:
          type: integer
          format: int16
          nullable: true
          example: 30
          default: 15
          description: Tiempo en segundos para responder (smallint, default 15)
        ruta_img:
          type: string
          maxLength: 255
          nullable: true
          example: img/cuestionarios/c_1/pregunta_101_12345.jpg
          description: Ruta de imagen adjunta a la pregunta
        vigente:
          type: boolean
          example: true
          default: true
          description: Estado de la pregunta (tinyint, default 1)
    PreguntaCreate:
      type: object
      required:
        - id_cuestionario
        - pregunta
        - num_pregunta
      properties:
        id_cuestionario:
          type: integer
          format: int32
          example: 1
        pregunta:
          type: string
          maxLength: 200
          example: ¿Qué es Python?
          minLength: 1
        num_pregunta:
          type: integer
          format: int16
          example: 2
          description: Número de pregunta (smallint)
        puntaje_base:
          type: integer
          format: int16
          nullable: true
          example: 150
          minimum: 0
          maximum: 1000
          description: Puntaje base (smallint, opcional)
        adjunto:
          type: string
          nullable: true
          example: texto adjunto opcional
          description: Texto adjunto (opcional)
        tiempo:
          type: integer
          format: int16
          nullable: true
          example: 45
          minimum: 10
          maximum: 100
          description: Tiempo en segundos (smallint, opcional, default 15)
        ruta_img:
          type: string
          maxLength: 255
          nullable: true
          example: img/cuestionarios/c_1/imagen.jpg
          description: Ruta de imagen (opcional)
    PreguntaUpdate:
      type: object
      required:
        - id_pregunta
        - pregunta
        - puntaje_base
      properties:
        id_pregunta:
          type: integer
          format: int32
          example: 101
        pregunta:
          type: string
          maxLength: 200
          example: ¿Cuál es la capital de España?
        puntaje_base:
          type: integer
          format: int16
          example: 200
          minimum: 0
          maximum: 1000
          description: Puntaje base (smallint)
    Opcion:
      type: object
      properties:
        id_opcion:
          type: integer
          format: int32
          example: 501
        opcion:
          type: string
          maxLength: 200
          example: París
          description: Texto de la opción de respuesta
        id_pregunta:
          type: integer
          format: int32
          example: 101
        es_correcta_bool:
          type: boolean
          example: true
          description: Indica si esta opción es la respuesta correcta (tinyint)
        descripcion:
          type: string
          nullable: true
          example: Descripción adicional de la opción
          description: Texto de descripción opcional
        adjunto:
          type: string
          nullable: true
          example: texto adjunto opcional
          description: Texto adjunto opcional
        vigente:
          type: boolean
          example: true
          default: true
          description: Estado de la opción (tinyint, default 1)
    OpcionCreate:
      type: object
      required:
        - opcion
        - id_pregunta
        - es_correcta_bool
      properties:
        opcion:
          type: string
          maxLength: 200
          example: Madrid
          minLength: 1
          description: Texto de la opción de respuesta
        id_pregunta:
          type: integer
          format: int32
          example: 101
        es_correcta_bool:
          type: boolean
          example: false
          description: Marcar true si es la respuesta correcta (tinyint)
        descripcion:
          type: string
          nullable: true
          example: Capital de España
          description: Descripción opcional
        adjunto:
          type: string
          nullable: true
          example: texto adjunto
          description: Texto adjunto opcional
    OpcionUpdate:
      type: object
      required:
        - id_opcion
        - opcion
      properties:
        id_opcion:
          type: integer
          format: int32
          example: 501
        opcion:
          type: string
          maxLength: 200
          example: Barcelona
          description: Nuevo texto de la opción
    Categoria:
      type: object
      properties:
        id_categoria:
          type: integer
          format: int64
          example: 30006
        categoria:
          type: string
          example: Matemáticas
          description: Nombre de la categoría
        descripcion:
          type: string
          nullable: true
          example: "Preguntas de matemáticas y álgebra"
          description: Descripción de la categoría
        vigente:
          type: integer
          example: 1
          description: 1 si está activa, 0 si está desactivada
    CategoriaCreate:
      type: object
      required:
        - categoria
      properties:
        categoria:
          type: string
          example: Categoría de Prueba
          description: Nombre de la categoría a crear
          minLength: 1
        descripcion:
          type: string
          nullable: true
          example: "Descripción de la categoría"
          description: Descripción opcional de la categoría
    CategoriaUpdate:
      type: object
      properties:
        categoria:
          type: string
          example: Categoría Actualizada
          description: Nuevo nombre de la categoría
          minLength: 1
        vigente:
          type: integer
          example: 1
          description: Nuevo estado (1 activa, 0 inactiva)
    Error:
      type: object
      properties:
        code:
          type: string
        message:
          type: string
      required:
        - code
        - message
    ErrorApi:
      type: object
      properties:
        code:
          type: integer
          example: 0
        message:
          type: string
          example: Conflicto
      required:
        - code
        - message
    RptaStandar:
      type: object
      properties:
        code:
          type: integer
          example: 1
        data:
          type: object
          example: {}
        message:
          type: string
          example: Operación realizada correctamente
    RptaListaInventario:
      type: object
      properties:
        code:
          type: integer
          example: 1
        data:
          type: array
          items:
            $ref: '#/components/schemas/InventarioFull'
        message:
          type: string
          example: Inventarios obtenidos correctamente
    RptaListaSkinsUsuario:
      type: object
      properties:
        code:
          type: integer
          example: 1
        data:
          type: array
          items:
            $ref: '#/components/schemas/SkinInventario'
        message:
          type: string
          example: Inventario del usuario obtenido correctamente
    InventarioFull:
      type: object
      properties:
        id_usuario:
          type: integer
          example: 5
        nombre_usuario:
          type: string
          example: "Juan Perez"
        id_skin:
          type: integer
          example: 3
        ruta_skin:
          type: string
          example: "skins/marco1.png"
    SkinInventario:
      type: object
      properties:
        id_skin:
          type: integer
          example: 3
        ruta:
          type: string
          example: "skins/marco1.png"
        tipo:
          type: string
          example: "marco"
        precio:
          type: number
          example: 150
        vigente:
          type: integer
          example: 1
    InventarioInsert:
      type: object
      properties:
        id_usuario:
          type: integer
          example: 2
        id_skin:
          type: integer
          example: 5
    InventarioUpdate:
      type: object
      properties:
        id_skin:
          type: integer
          example: 8
    Partida:
      type: object
      properties:
        id_partida:
          type: integer
          format: int64
          example: 42
        pin:
          type: string
          example: "123456"
        id_cuestionario:
          type: integer
          example: 5
        id_usuario_anfitrion:
          type: integer
          nullable: true
          example: 10
        modalidad:
          type: string
          example: "CLASICO"
        estado:
          type: string
          example: "ACTIVO"
        fecha_hora_inicio:
          type: string
          format: date-time
          example: "Sat, 11 Oct 2025 22:30:00 GMT"
        fecha_hora_fin:
          type: string
          format: date-time
          nullable: true
          example: "Sat, 11 Oct 2025 22:33:00 GMT"
        cant_grupos:
          type: integer
          nullable: true
          example: 4
        recompensas_otorgadas:
          type: integer
          nullable: true
          example: 0
    PartidaCreate:
      type: object
      description: Datos necesarios para crear una partida.
      required:
        - pin
        - id_cuestionario
        - modalidad
        - estado
        - fecha_hora_inicio
      properties:
        pin:
          type: string
          example: "123456"
        id_cuestionario:
          type: integer
          example: 5
        id_usuario_anfitrion:
          type: integer
          nullable: true
          example: 10
        modalidad:
          type: string
          example: "CLASICO"
        estado:
          type: string
          example: "ACTIVO"
        fecha_hora_inicio:
          type: string
          format: date-time
          example: "Sat, 11 Oct 2025 15:30:00 GMT"
        fecha_hora_fin:
          type: string
          format: date-time
          nullable: true
          example: "Sat, 11 Oct 2025 15:35:00 GMT"
        cant_grupos:
          type: integer
          nullable: true
          example: 4
        recompensas_otorgadas:
          type: integer
          nullable: true
          example: 0
    PartidaUpdate:
      type: object
      description: Campos opcionales para actualizar una partida.
      properties:
        pin:
          type: string
          example: "123456"
        id_cuestionario:
          type: integer
          example: 5
        id_usuario_anfitrion:
          type: integer
          nullable: true
          example: 10
        modalidad:
          type: string
          example: "CLASICO"
        estado:
          type: string
          example: "ACTIVO"
        fecha_hora_inicio:
          type: string
          format: date-time
          example: "Sat, 11 Oct 2025 15:30:00 GMT"
        fecha_hora_fin:
          type: string
          format: date-time
          nullable: true
          example: "Sat, 11 Oct 2025 15:35:00 GMT"
        cant_grupos:
          type: integer
          nullable: true
          example: 4
        recompensas_otorgadas:
          type: integer
          nullable: true
          example: 0
    RptaListaPartida:
      type: object
      properties:
        code:
          type: integer
          example: 1
        data:
          type: array
          items:
            $ref: '#/components/schemas/Partida'
        message:
          type: string
          example: Partidas obtenidas correctamente
    RptaPartida:
      type: object
      properties:
        code:
          type: integer
          example: 1
        data:
          $ref: '#/components/schemas/Partida'
        message:
          type: string
          example: Partida obtenida correctamente
    RptaCrearPartida:
      type: object
      properties:
        code:
          type: integer
          example: 1
        data:
          type: object
          properties:
            id_partida:
              type: integer
              format: int64
              example: 42
        message:
          type: string
          example: Partida creada correctamente
    RespuestaEstandar:
      type: object
      properties:
        code:
          type: integer
          example: 1
        message:
          type: string
          example: Operación exitosa
        data:
          type: object
          nullable: true
          example: {}
    Participante:
      type: object
      properties:
        id_participante:
          type: integer
          format: int64
          example: 105
        nombre:
          type: string
          example: Jugador1
        registrado:
          type: integer
          example: 0
          description: 0=invitado, 1=registrado
        puntaje:
          type: integer
          example: 0
        id_partida:
          type: integer
          example: 480072
        id_usuario:
          type: integer
          nullable: true
          example: 10
        id_grupo:
          type: integer
          nullable: true
          example: 1
        grupo:
          type: integer
          nullable: true
          example: 1
    ParticipanteCreate:
      type: object
      required:
        - id_partida
        - nombre
      properties:
        id_partida:
          type: integer
          example: 480072
        nombre:
          type: string
          example: NuevoJugador
        registrado:
          type: integer
          default: 0
        id_usuario:
          type: integer
          nullable: true
    ParticipanteUpdate:
      type: object
      properties:
        nombre:
          type: string
          example: JugadorActualizado
        puntaje:
          type: integer
          example: 1500
        grupo:
          type: integer
          example: 2
    RespuestaJuego:
      type: object
      properties:
        id_respuesta:
          type: integer
          format: int64
          example: 501
        id_participante:
          type: integer
          example: 10
        id_partida:
          type: integer
          example: 480072
        id_pregunta:
          type: integer
          example: 33
        opcion_texto:
          type: string
          example: "48"
        es_correcta:
          type: integer
          example: 1
          description: 0=incorrecta, 1=correcta
        puntaje:
          type: integer
          example: 1000
        tiempo_respuesta:
          type: string
          example: "00:00:02"
        creado_en:
          type: string
          format: date-time
          example: "Sat, 11 Oct 2025 15:31:00 GMT"
    RespuestaCreate:
      type: object
      required:
        - id_participante
        - id_partida
        - id_pregunta
      properties:
        id_participante:
          type: integer
          example: 10
        id_opcion:
          type: integer
          example: 55
        id_partida:
          type: integer
          example: 480072
        id_pregunta:
          type: integer
          example: 33
        opcion_texto:
          type: string
          example: "48"
        es_correcta:
          type: integer
          example: 1
        puntaje:
          type: integer
          example: 1000
        tiempo_respuesta:
          type: string
          example: "00:00:02"
    RespuestaUpdate:
      type: object
      properties:
        es_correcta:
          type: integer
          enum: [0, 1]
        puntaje:
          type: integer
          example: 1200
        opcion_texto:
          type: string
          example: "Respuesta actualizada"
  securitySchemes:
    jwt_auth:
      type: http
      scheme: bearer
      bearerFormat: JWT
      description: Autenticación mediante JSON Web Token (JWT). Incluir el token en el header Authorization con el formato "Bearer {token}"
